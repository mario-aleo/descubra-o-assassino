<html><head><link rel="import" href="../../bower_components/polymer/polymer-element.html"><link rel="import" href="../../bower_components/app-layout/app-header-layout/app-header-layout.html"><link rel="import" href="../../bower_components/app-layout/app-header/app-header.html"><link rel="import" href="../../bower_components/app-layout/app-toolbar/app-toolbar.html"><link rel="import" href="../../bower_components/app-layout/app-scroll-effects/effects/waterfall.html"><link rel="import" href="../../bower_components/paper-card/paper-card.html"><link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html"><link rel="import" href="../../bower_components/paper-item/paper-item.html"><link rel="import" href="../../bower_components/paper-fab/paper-fab.html"><link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html"><link rel="import" href="../../bower_components/iron-icons/iron-icons.html"><link rel="import" href="../../bower_components/iron-icons/av-icons.html"><link rel="import" href="../../bower_components/paper-toast/paper-toast.html"><link rel="import" href="../detetive-redux/detetive-redux.html"><link rel="import" href="../functional-tools/functional-tools.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/element-mixin.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/boot.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/settings.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/resolve-url.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/mixin.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/case-map.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/style-gather.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/dom-module.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/property-effects.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/path.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/property-accessors.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/async.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/template-stamp.html"><link rel="prefetch" href="../../bower_components/polymer/polymer.html"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/legacy-element-mixin.html"><link rel="prefetch" href="../../bower_components/shadycss/apply-shim.html"><link rel="prefetch" href="../../bower_components/shadycss/apply-shim.min.js"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/gesture-event-listeners.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/gestures.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/debounce.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/dir-mixin.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/import-href.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/render-status.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/unresolved.html"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/polymer.dom.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/flattened-nodes-observer.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/array-splice.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/flush.html"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/polymer-fn.html"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/class.html"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/templatizer-behavior.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/templatize.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/mutable-data.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/dom-bind.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/dom-repeat.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/dom-if.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/array-selector.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/custom-style.html"><link rel="prefetch" href="../../bower_components/shadycss/custom-style-interface.html"><link rel="prefetch" href="../../bower_components/shadycss/custom-style-interface.min.js"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/mutable-data-behavior.html"><link rel="prefetch" href="../../bower_components/iron-flex-layout/iron-flex-layout.html"><link rel="prefetch" href="../../bower_components/app-layout/app-layout-behavior/app-layout-behavior.html"><link rel="prefetch" href="../../bower_components/iron-resizable-behavior/iron-resizable-behavior.html"><link rel="prefetch" href="../../bower_components/app-layout/app-scroll-effects/app-scroll-effects-behavior.html"><link rel="prefetch" href="../../bower_components/iron-scroll-target-behavior/iron-scroll-target-behavior.html"><link rel="prefetch" href="../../bower_components/app-layout/helpers/helpers.html"><link rel="prefetch" href="../../bower_components/iron-image/iron-image.html"><link rel="prefetch" href="../../bower_components/paper-styles/element-styles/paper-material-styles.html"><link rel="prefetch" href="../../bower_components/paper-styles/shadow.html"><link rel="prefetch" href="../../bower_components/paper-styles/default-theme.html"><link rel="prefetch" href="../../bower_components/paper-styles/color.html"><link rel="prefetch" href="../../bower_components/iron-menu-behavior/iron-menu-behavior.html"><link rel="prefetch" href="../../bower_components/iron-selector/iron-multi-selectable.html"><link rel="prefetch" href="../../bower_components/iron-selector/iron-selectable.html"><link rel="prefetch" href="../../bower_components/iron-selector/iron-selection.html"><link rel="prefetch" href="../../bower_components/iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="prefetch" href="../../bower_components/paper-item/paper-item-behavior.html"><link rel="prefetch" href="../../bower_components/iron-behaviors/iron-button-state.html"><link rel="prefetch" href="../../bower_components/iron-behaviors/iron-control-state.html"><link rel="prefetch" href="../../bower_components/paper-item/paper-item-shared-styles.html"><link rel="prefetch" href="../../bower_components/paper-styles/typography.html"><link rel="prefetch" href="../../bower_components/font-roboto/roboto.html"><link rel="prefetch" href="../../bower_components/iron-icon/iron-icon.html"><link rel="prefetch" href="../../bower_components/iron-meta/iron-meta.html"><link rel="prefetch" href="../../bower_components/paper-behaviors/paper-button-behavior.html"><link rel="prefetch" href="../../bower_components/paper-behaviors/paper-ripple-behavior.html"><link rel="prefetch" href="../../bower_components/paper-ripple/paper-ripple.html"><link rel="prefetch" href="../../bower_components/paper-behaviors/paper-inky-focus-behavior.html"><link rel="prefetch" href="../../bower_components/iron-iconset-svg/iron-iconset-svg.html"><link rel="prefetch" href="../../bower_components/iron-a11y-announcer/iron-a11y-announcer.html"><link rel="prefetch" href="../../bower_components/iron-overlay-behavior/iron-overlay-behavior.html"><link rel="prefetch" href="../../bower_components/iron-fit-behavior/iron-fit-behavior.html"><link rel="prefetch" href="../../bower_components/iron-overlay-behavior/iron-overlay-manager.html"><link rel="prefetch" href="../../bower_components/iron-overlay-behavior/iron-overlay-backdrop.html"><link rel="prefetch" href="../../bower_components/iron-overlay-behavior/iron-scroll-manager.html"><link rel="prefetch" href="../../bower_components/iron-overlay-behavior/iron-focusables-helper.html"><link rel="prefetch" href="../../bower_components/polymer-redux/polymer-redux.html"><link rel="prefetch" href="../../bower_components/polymer-redux/dist/polymer-redux.html"></head><body><dom-module id="detetive-app"><template><style>:host{display:block;--primary-color:#673AB7;--darker-primary-color:#512DA8;--light-primary-color:#D1C4E9;--secondary-color:#03A9F4;--focus-color:#0288D1;--primary-text:#212121;--secondary-text:#727272;--divider-color:#B6B6B6;--basic-color:#EDECEC;--paper-fab-background:var(--secondary-color);--paper-fab-keyboard-focus-background:var(--focus-color);--paper-menu-selected-item:var(--secondary-color);min-height:100vh;background-color:var(--basic-color);}image,
			embed,
			object,
			video{max-width:100%;}app-header{width:100%;background-color:var(--primary-color);}app-toolbar div[main-title]{color:#FFF;background-color:var(--primary-color);}paper-card{width:calc(100% - 16px);margin:16px 8px 0 8px;}paper-card:last-of-type{margin:16px 8px;}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1000;}</style><app-header-layout><app-header slot="header" fixed="" effects="waterfall"><app-toolbar><div main-title="">Detetive</div></app-toolbar></app-header><section id="content"><paper-card id="assassinsCard" heading="Assassinos"><div class="card-content"><paper-listbox id="assassinsList" selected="0" disabled="[[ !_completed ]]"><template is="dom-repeat" items="[[ _assassinsList ]]" as="assassin"><paper-item>[[ assassin.Nome ]]</paper-item></template></paper-listbox></div></paper-card><paper-card id="placesCard" heading="Locais"><div class="card-content"><paper-listbox id="placesList" selected="0" disabled="[[ !_completed ]]"><template is="dom-repeat" items="[[ _placesList ]]" as="place"><paper-item>[[ place.Nome ]]</paper-item></template></paper-listbox></div></paper-card><paper-card id="weaponsCard" heading="Armas"><div class="card-content"><paper-listbox id="weaponsList" selected="0" disabled="[[ !_completed ]]"><template is="dom-repeat" items="[[ _weaponsList ]]" as="weapon"><paper-item>[[ weapon.Nome ]]</paper-item></template></paper-listbox></div></paper-card></section></app-header-layout><template is="dom-if" if="[[ !_completed ]]"><paper-fab icon="send" on-click="sendTheory"></paper-fab></template><template is="dom-if" if="[[ _completed ]]"><paper-fab icon="play-arrow" on-click="startNewGame"></paper-fab></template><paper-toast id="toast" vertical-offset="48"></paper-toast></template><script>class DetetiveApp extends DetetiveBehavior(Polymer.Element){static get is(){return"detetive-app"}static get properties(){return{_apiUrl:{type:String,readOnly:!0,value:"https://handson.eniwine.com.br/api/descubraoassassino"},_gameKey:{type:String,statePath:`gameKey`},_assassinsList:{type:Array,statePath:`assassinsList`},_placesList:{type:Array,statePath:`placesList`},_weaponsList:{type:Array,statePath:`weaponsList`},_completed:{type:Boolean,statePath:`completed`}}}ready(){super.ready(),this.startNewGame(),this.removeAttribute(`unresolved`)}connectedCallback(){super.connectedCallback(),`serviceWorker`in navigator&&navigator.serviceWorker.register(`../../service-worker.js`,{scope:`/`}),this.$.toast.text="Selecione um assassino, um local, uma arma e me mande sua teoria, eu direi o que sei sobre ;)",this.$.toast.open()}startNewGame(){const a=curry((a,b)=>{let c={completed:!1};b=JSON.parse(b),c[a]="gameKey"==a?b.misterioId:b,this.dispatch({type:"NEW_GAME",payload:c})});(()=>fetch(this._apiUrl))().then(validateFetchResponse).then(compose(()=>fetch(`${this._apiUrl}/criminosos`),a("gameKey"))).then(validateFetchResponse).then(compose(()=>fetch(`${this._apiUrl}/locais`),a("assassinsList"))).then(validateFetchResponse).then(compose(()=>fetch(`${this._apiUrl}/armas`),a("placesList"))).then(validateFetchResponse).then(a("weaponsList")).catch((a)=>console.error(a))}sendTheory(){(()=>fetch(this._apiUrl,{method:"POST",headers:{Accept:"application/json, application/xml, text/plain, text/html, *.*","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({idMisterio:this._gameKey,IdSuspeito:this._assassinsList[this.$.assassinsList.selected].Id,IdLocal:this._placesList[this.$.placesList.selected].Id,IdArma:this._weaponsList[this.$.weaponsList.selected].Id})}))().then(validateFetchResponse).then((a)=>1===a?(this.$.toast.close(),this.$.toast.text="Infelizmente o assassino est\xE1 errado :(",this.$.toast.open()):2===a?(this.$.toast.close(),this.$.toast.text="Infelizmente o local est\xE1 errado :(",this.$.toast.open()):3===a?(this.$.toast.close(),this.$.toast.text="Infelizmente a arma est\xE1 errado :(",this.$.toast.open()):(this.$.toast.close(),this.$.toast.text="Par\xE1bens, voc\xEA desvendou o crime, clique no play para reiniciar :)",this.$.toast.open(),this.dispatch({type:"END_GAME"}))).catch((a)=>console.error(a))}}window.customElements.define(DetetiveApp.is,DetetiveApp);</script></dom-module></body></html>